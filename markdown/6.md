+ [author](https://github.com/3293172751)
<a href="https://github.com/3293172751" target="_blank"><img src="https://img.shields.io/badge/Github-xiongxinwei-inactive?style=social&logo=github"></a></p>
# ç¬¬6èŠ‚ å †ç»“æ„
+ [å›åˆ°ç›®å½•](../README.md)
+ [å›åˆ°é¡¹ç›®é¦–é¡µ](../../README.md)
+ [ä¸Šä¸€èŠ‚](5.md)
> â¤ï¸ğŸ’•ğŸ’•ç®—æ³•å­¦ä¹ ç¬”è®°å’ŒLeetCodeçš„åˆ·é¢˜ç¬”è®°ä¸è®°å½•ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)
---
[TOC]

## å †çš„åŸºæœ¬å­˜å‚¨

### æ¦‚å¿µåŠå…¶ä»‹ç»

å †(Heap)æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­ä¸€ç±»ç‰¹æ®Šçš„æ•°æ®ç»“æ„çš„ç»Ÿç§°ã€‚

**å †é€šå¸¸æ˜¯ä¸€ä¸ªå¯ä»¥è¢«çœ‹åšä¸€æ£µå®Œå…¨äºŒå‰æ ‘çš„æ•°ç»„å¯¹è±¡ã€‚**

> ç›¸å½“äºæŠŠä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘æ”¾åœ¨æ•°ç»„ä¸­ï¼Œè€Œå…¶ä¸­çš„å·¦å³å­©å­

+ `i`çš„å·¦å­©å­ï¼š`2*i+1`
+ `i`çš„å³å­©å­ï¼š`2*i+2`
+ `i`çš„çˆ¶äº²ï¼š$${\color{Red} \frac{i-1}{2} } $$

å †æ»¡è¶³ä¸‹åˆ—æ€§è´¨ï¼š

- å †ä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºæˆ–ä¸å°äºå…¶çˆ¶èŠ‚ç‚¹çš„å€¼ã€‚
- å †æ€»æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ã€‚



#### å †å±æ€§

å †åˆ†ä¸ºä¸¤ç§ï¼š*æœ€å¤§å †*å’Œ*æœ€å°å †*ï¼Œä¸¤è€…çš„å·®åˆ«åœ¨äºèŠ‚ç‚¹çš„æ’åºæ–¹å¼ã€‚

åœ¨æœ€å¤§å †ä¸­ï¼Œçˆ¶èŠ‚ç‚¹çš„å€¼æ¯”æ¯ä¸€ä¸ªå­èŠ‚ç‚¹çš„å€¼éƒ½è¦å¤§ã€‚åœ¨æœ€å°å †ä¸­ï¼Œçˆ¶èŠ‚ç‚¹çš„å€¼æ¯”æ¯ä¸€ä¸ªå­èŠ‚ç‚¹çš„å€¼éƒ½è¦å°ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œå †å±æ€§â€ï¼Œå¹¶ä¸”è¿™ä¸ªå±æ€§å¯¹å †ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æˆç«‹ã€‚

ä¾‹å­ï¼š

![image-20220722105129251](assets/image-20220722105129251.png)

è¿™æ˜¯ä¸€ä¸ªæœ€å¤§å †ï¼Œï¼Œå› ä¸ºæ¯ä¸€ä¸ªçˆ¶èŠ‚ç‚¹çš„å€¼éƒ½æ¯”å…¶å­èŠ‚ç‚¹è¦å¤§ã€‚`10` æ¯” `7` å’Œ `2` éƒ½å¤§ã€‚`7` æ¯” `5` å’Œ `1`éƒ½å¤§ã€‚

æ ¹æ®è¿™ä¸€å±æ€§ï¼Œé‚£ä¹ˆæœ€å¤§å †æ€»æ˜¯å°†å…¶ä¸­çš„æœ€å¤§å€¼å­˜æ”¾åœ¨æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚è€Œå¯¹äºæœ€å°å †ï¼Œæ ¹èŠ‚ç‚¹ä¸­çš„å…ƒç´ æ€»æ˜¯æ ‘ä¸­çš„æœ€å°å€¼ã€‚å †å±æ€§éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå †å¸¸å¸¸è¢«å½“åšä¼˜å…ˆé˜Ÿåˆ—ä½¿ç”¨ï¼Œå› ä¸ºå¯ä»¥å¿«é€Ÿåœ°è®¿é—®åˆ°â€œæœ€é‡è¦â€çš„å…ƒç´ ã€‚

> **æ³¨æ„ï¼š**å †çš„æ ¹èŠ‚ç‚¹ä¸­å­˜æ”¾çš„æ˜¯æœ€å¤§æˆ–è€…æœ€å°å…ƒç´ ï¼Œä½†æ˜¯å…¶ä»–èŠ‚ç‚¹çš„æ’åºé¡ºåºæ˜¯æœªçŸ¥çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæœ€å¤§å †ä¸­ï¼Œæœ€å¤§çš„é‚£ä¸€ä¸ªå…ƒç´ æ€»æ˜¯ä½äº index 0 çš„ä½ç½®ï¼Œä½†æ˜¯æœ€å°çš„å…ƒç´ åˆ™æœªå¿…æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ã€‚--å”¯ä¸€èƒ½å¤Ÿä¿è¯çš„æ˜¯æœ€å°çš„å…ƒç´ æ˜¯ä¸€ä¸ªå¶èŠ‚ç‚¹ï¼Œä½†æ˜¯ä¸ç¡®å®šæ˜¯å“ªä¸€ä¸ªã€‚



##### å¤§åˆ†å †ä»£ç 

> çˆ¶ç»“ç‚¹æ¯”å­èŠ‚ç‚¹éƒ½å¤§

```java
public static void heapInsert(int[] arr,int index){
//ç­‰æ‰¾åˆ°æŸä¸ªæ•°ä¸å†æ¯”çˆ¶èŠ‚ç‚¹å¤§ï¼Œæˆ–è€…æ¥åˆ°é›¶ä½ç½®ï¼ˆindex - 1)/2 == 0),>ä¹Ÿæˆç«‹
	while(arr[index] > arr[(index - 1) / 2]){
		swap(arr,index,(index - 1)/2);
		index = (index - 1)/2;
	}
}
```

##### å°åˆ†å †ä»£ç 

> çˆ¶èŠ‚ç‚¹æ¯”å­èŠ‚ç‚¹éƒ½å°

```go
package main
import ("fmt")

func main() {
	arr := []int{12,213,12,12,3,4,3,2,1}
   index := 6
   heapInsert(arr,index)
  fmt.Println("arr=",arr)
  fmt.Println("index=",index)
}
func heapInsert(arr []int,index int){
    for arr[index] < (arr[(index) - 1])>>1 {
        swap(arr,index,(index - 1)/2)
        index = (index - 1)>>1
    }
}

func swap(arr []int,a int, b int){
	arr[a], arr[b] = arr[b], arr[a]
}
```

**run**

```
arr= [12 213 12 12 3 4 3 2 1]
index= 6
```



##### æ¡ˆä¾‹ï¼šæ‰¾å‡ºæœ€å¤§å€¼ç§»é™¤ä¾æ—§æ˜¯å †

```java
// æŸä¸€ä¸ªæ•°æ˜¯åœ¨indexä½ç½®ï¼Œèƒ½å¦å‘ä¸‹ç§»åŠ¨
public static void heapInsert(int[] arr,int index, int heapSize){
    //heapSizeåˆ¤æ–­æ˜¯å¦è¶Šç•Œ
    int left = index * 2 + 1;
	while(left < heapSize){
        //è¯´æ˜æœ‰å·¦å­©å­  --  åˆ¤æ–­æœ‰æ— å­©å­
        
        //åˆ¤æ–­å·¦å³å­©å­å¤§å°,å³å­©å­å­˜åœ¨ä¸”å³å­©å­å¤§äºå·¦å­©å­
        int largest = left + 1 < heapSiza && arr[left] < arr[left + 1]?left + 1:left;
		
        //åˆ¤æ–­largetå­å­©å­å’Œçˆ¶èŠ‚ç‚¹å¤§å°
        largest = arr[largest] > arr[inde]? largest:index;
        if(largest == index){break;}
        swap(arr,largest,index);
        index = largest;     //çˆ¶ç»“ç‚¹ç»§ç»­å¾€ä¸‹èµ°
        left = index * 2 + 1;
	}
}
```





### é€‚ç”¨è¯´æ˜

å †æ˜¯åˆ©ç”¨å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„æ¥ç»´æŠ¤ä¸€ç»„æ•°æ®ï¼Œç„¶åè¿›è¡Œç›¸å…³æ“ä½œï¼Œä¸€èˆ¬çš„æ“ä½œè¿›è¡Œä¸€æ¬¡çš„æ—¶é—´å¤æ‚åº¦åœ¨ **O(1)~O(logn)** ä¹‹é—´ï¼Œå †é€šå¸¸ç”¨äºåŠ¨æ€åˆ†é…å’Œé‡Šæ”¾ç¨‹åºæ‰€ä½¿ç”¨çš„å¯¹è±¡ã€‚

è‹¥ä¸ºä¼˜å…ˆé˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯ï¼Œæ™®é€šæ•°ç»„æˆ–è€…é¡ºåºæ•°ç»„ï¼Œæœ€å·®æƒ…å†µä¸º **O(n^2)**ï¼Œå †è¿™ç§æ•°æ®ç»“æ„ä¹Ÿå¯ä»¥æé«˜å…¥é˜Ÿå’Œå‡ºé˜Ÿçš„æ•ˆç‡ã€‚

|          | å…¥é˜Ÿ    |  å‡ºé˜Ÿ  |
| :------: | :------ | :----: |
| æ™®é€šæ•°ç»„ | O(1)    |  O(n)  |
| é¡ºåºæ•°ç»„ | O(n)    |  O(1)  |
|    å †    | O(logn) | O(log) |

> ç”±æ­¤çœ‹åˆ°å †ç»“æ„å¾ˆä¸é”™ï¼Œæ— è®ºæ˜¯å…¥é˜Ÿè¿˜æ˜¯å‡ºé˜Ÿéƒ½æ˜¯logNçº§åˆ«ä»£ä»·



### ç»“æ„å›¾ç¤º

äºŒå‰å †æ˜¯ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ï¼Œä¸”å †ä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºå…¶çˆ¶èŠ‚ç‚¹çš„å€¼ï¼Œè¯¥å®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦ä¸º kï¼Œé™¤ç¬¬ k å±‚å¤–ï¼Œå…¶å®ƒå„å±‚ (1ï½k-1) çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ä¸ªæ•°ï¼Œç¬¬k å±‚æ‰€æœ‰çš„ç»“ç‚¹éƒ½è¿ç»­é›†ä¸­åœ¨æœ€å·¦è¾¹ã€‚

å…¶ä¸­å †çš„æ ¹èŠ‚ç‚¹æœ€å¤§ç§°ä¸ºæœ€å¤§å †ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![img](assets/heap-01.png)

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°ç»„å­˜å‚¨äºŒå‰å †ï¼Œå³è¾¹çš„æ ‡å·æ˜¯æ•°ç»„çš„ç´¢å¼•ã€‚

![img](assets/heap-02.png)

![img](assets/heap-03.png)

å‡è®¾å½“å‰å…ƒç´ çš„ç´¢å¼•ä½ç½®ä¸º iï¼Œå¯ä»¥å¾—åˆ°è§„å¾‹ï¼š

```
parent(i) = i/2ï¼ˆå–æ•´ï¼‰
left child(i) = 2*i
right child(i) = 2*i +1
```



## å †çš„ shift up

å‘ä¸€ä¸ªæœ€å¤§å †ä¸­æ·»åŠ å…ƒç´ ï¼Œç§°ä¸º **shift up**ã€‚

å‡è®¾æˆ‘ä»¬å¯¹ä¸‹é¢çš„æœ€å¤§å †æ–°åŠ å…¥ä¸€ä¸ªå…ƒç´ 52ï¼Œæ”¾åœ¨æ•°ç»„çš„æœ€åä¸€ä½ï¼Œ52å¤§äºçˆ¶èŠ‚ç‚¹16ï¼Œæ­¤æ—¶ä¸æ»¡è¶³å †çš„å®šä¹‰ï¼Œéœ€è¦è¿›è¡Œè°ƒæ•´ã€‚

![img](assets/shiftUp-01.png)

é¦–å…ˆäº¤æ¢ç´¢å¼•ä¸º 5 å’Œ 11 æ•°ç»„ä¸­æ•°å€¼çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ 52 å’Œ 16 äº¤æ¢ä½ç½®ã€‚

![img](assets/shiftUp-02.png)

æ­¤æ—¶ 52 ä¾ç„¶æ¯”çˆ¶èŠ‚ç‚¹ç´¢å¼•ä¸º 2 çš„æ•°å€¼ 41 å¤§ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¿›ä¸€æ­¥æŒªä½ç½®ã€‚

![img](assets/shiftUp-03.png)

è¿™æ—¶æ¯”è¾ƒ 52 å’Œ 62 çš„å¤§å°ï¼Œ52 å·²ç»æ¯”çˆ¶èŠ‚ç‚¹å°äº†ï¼Œä¸éœ€è¦å†ä¸Šå‡äº†ï¼Œæ»¡è¶³æœ€å¤§å †çš„å®šä¹‰ã€‚æˆ‘ä»¬ç§°è¿™ä¸ªè¿‡ç¨‹ä¸ºæœ€å¤§å †çš„ shift upã€‚





##  å †çš„ shift down

**ä»ä¸€ä¸ªæœ€å¤§å †ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º shift down**

åªèƒ½å–å‡ºæœ€å¤§ä¼˜å…ˆçº§çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ ¹èŠ‚ç‚¹ï¼ŒæŠŠåŸæ¥çš„ 62 å–å‡ºåï¼Œä¸‹é¢ä»‹ç»å¦‚ä½•å¡«è¡¥è¿™ä¸ªæœ€å¤§å †ã€‚

![img](assets/shiftDown-01.png)

ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†æ•°ç»„æœ€åä¸€ä½æ•°ç»„æ”¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œæ­¤æ—¶ä¸æ»¡è¶³æœ€å¤§å †çš„å®šä¹‰ã€‚

![img](assets/shiftDown-02.png)

è°ƒæ•´çš„è¿‡ç¨‹æ˜¯å°†è¿™ä¸ªæ ¹èŠ‚ç‚¹ 16 ä¸€æ­¥ä¸€æ­¥å‘ä¸‹æŒªï¼Œ16 æ¯”å­èŠ‚ç‚¹éƒ½å°ï¼Œå…ˆæ¯”è¾ƒå­èŠ‚ç‚¹ 52 å’Œ 30 å“ªä¸ªå¤§ï¼Œå’Œå¤§çš„äº¤æ¢ä½ç½®ã€‚

![img](assets/zwmoTNoXr132c2OT.png)

ç»§ç»­æ¯”è¾ƒ 16 çš„å­èŠ‚ç‚¹ 28 å’Œ 41ï¼Œ41 å¤§ï¼Œæ‰€ä»¥ 16 å’Œ 41 äº¤æ¢ä½ç½®ã€‚

![img](assets/68y5vruWLTnsrcuD.png)

ç»§ç»­ 16 å’Œå­©å­èŠ‚ç‚¹ 15 è¿›è¡Œæ¯”è¾ƒï¼Œ16 å¤§ï¼Œæ‰€ä»¥ç°åœ¨ä¸éœ€è¦è¿›è¡Œäº¤æ¢ï¼Œæœ€åæˆ‘ä»¬çš„ shift down æ“ä½œå®Œæˆï¼Œç»´æŒäº†ä¸€ä¸ªæœ€å¤§å †çš„æ€§è´¨ã€‚



## åŸºç¡€å †æ’åº

### æ¦‚å¿µåŠå…¶ä»‹ç»

å †æ’åºï¼ˆHeapsortï¼‰æ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ã€‚

å †æ˜¯ä¸€ä¸ªè¿‘ä¼¼ å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå¹¶åŒæ—¶æ»¡è¶³å †ç§¯çš„æ€§è´¨ï¼šå³å­ç»“ç‚¹çš„é”®å€¼æˆ–ç´¢å¼•æ€»æ˜¯å°äºï¼ˆæˆ–è€…å¤§äºï¼‰å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚

### é€‚ç”¨è¯´æ˜

æˆ‘ä»¬ä¹‹å‰æ„é€ å †çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªä¸ªæ•°æ®è°ƒç”¨ insert æ–¹æ³•ä½¿ç”¨ shift up é€ä¸ªæ’å…¥åˆ°å †ä¸­ï¼Œè¿™ä¸ªç®—æ³•çš„æ—¶å€™æ—¶é—´å¤æ‚åº¦æ˜¯ **O(nlogn)**ï¼Œæœ¬å°èŠ‚ä»‹ç»çš„ä¸€ç§æ„é€ å †æ’åºçš„è¿‡ç¨‹ï¼Œç§°ä¸º **Heapify**ï¼Œç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸º **O(n)**ã€‚

### è¿‡ç¨‹å›¾ç¤º

å®Œå…¨äºŒå‰æ ‘æœ‰ä¸ªé‡è¦æ€§è´¨ï¼Œå¯¹äºç¬¬ä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„ç´¢å¼•æ˜¯ **n/2** å–æ•´æ•°å¾—åˆ°çš„ç´¢å¼•å€¼ï¼Œå…¶ä¸­ **n** æ˜¯å…ƒç´ ä¸ªæ•°(å‰ææ˜¯æ•°ç»„ç´¢å¼•ä» 1 å¼€å§‹è®¡ç®—)ã€‚

![img](assets/heapify-01.png)

ç´¢å¼• 5 ä½ç½®æ˜¯ç¬¬ä¸€ä¸ªéå¶å­èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä»å®ƒå¼€å§‹é€ä¸€å‘å‰åˆ†åˆ«æŠŠæ¯ä¸ªå…ƒç´ ä½œä¸ºæ ¹èŠ‚ç‚¹è¿›è¡Œ shift down æ“ä½œæ»¡è¶³æœ€å¤§å †çš„æ€§è´¨ã€‚

ç´¢å¼• 5 ä½ç½®è¿›è¡Œ shift down æ“ä½œåï¼Œ22 å’Œ 62 äº¤æ¢ä½ç½®ã€‚

![img](assets/heapify-02.png)

å¯¹ç´¢å¼• 4 å…ƒç´ è¿›è¡Œ shift down æ“ä½œ

![img](assets/heapify-03.png)

å¯¹ç´¢å¼• 3 å…ƒç´ è¿›è¡Œ shift down æ“ä½œ

![img](assets/heapify-04.png)

å¯¹ç´¢å¼• 2 å…ƒç´ è¿›è¡Œ shift down æ“ä½œ

![img](assets/heapify-05.png)

æœ€åå¯¹æ ¹èŠ‚ç‚¹è¿›è¡Œ shift down æ“ä½œï¼Œæ•´ä¸ªå †æ’åºè¿‡ç¨‹å°±å®Œæˆäº†ã€‚

![img](assets/heapify-06.png)

### å®ä¾‹ä»£ç 

+ [javaä»£ç åœ°å€ğŸ–±ï¸](../code/java/sortTestHelper.java)

```java
import runoob.sort.SortTestHelper;

/**
 * ç”¨heapifyè¿›è¡Œå †æ’åº
 */
public class Heapify<T extends Comparable> {

    protected T[] data;
    protected int count;
    protected int capacity;

    // æ„é€ å‡½æ•°, é€šè¿‡ä¸€ä¸ªç»™å®šæ•°ç»„åˆ›å»ºä¸€ä¸ªæœ€å¤§å †
    // è¯¥æ„é€ å †çš„è¿‡ç¨‹, æ—¶é—´å¤æ‚åº¦ä¸ºO(n)
    public Heapify(T arr[]){

        int n = arr.length;

        data = (T[])new Comparable[n+1];
        capacity = n;

        for( int i = 0 ; i < n ; i ++ )
            data[i+1] = arr[i];
        count = n;
        //ä»ç¬¬ä¸€ä¸ªä¸æ˜¯å¶å­èŠ‚ç‚¹çš„å…ƒç´ å¼€å§‹
        for( int i = count/2 ; i >= 1 ; i -- )
            shiftDown(i);
    }
    // è¿”å›å †ä¸­çš„å…ƒç´ ä¸ªæ•°
    public int size(){
        return count;
    }
    // è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼, è¡¨ç¤ºå †ä¸­æ˜¯å¦ä¸ºç©º
    public boolean isEmpty(){
        return count == 0;
    }
    // åƒæœ€å¤§å †ä¸­æ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´  item
    public void insert(T item){
        assert count + 1 <= capacity;
        data[count+1] = item;
        count ++;
        shiftUp(count);
    }
    // ä»æœ€å¤§å †ä¸­å–å‡ºå †é¡¶å…ƒç´ , å³å †ä¸­æ‰€å­˜å‚¨çš„æœ€å¤§æ•°æ®
    public T extractMax(){
        assert count > 0;
        T ret = data[1];
        swap( 1 , count );
        count --;
        shiftDown(1);
        return ret;
    }
    // è·å–æœ€å¤§å †ä¸­çš„å †é¡¶å…ƒç´ 
    public T getMax(){
        assert( count > 0 );
        return data[1];
    }


    // äº¤æ¢å †ä¸­ç´¢å¼•ä¸ºiå’Œjçš„ä¸¤ä¸ªå…ƒç´ 
    private void swap(int i, int j){
        T t = data[i];
        data[i] = data[j];
        data[j] = t;
    }

    //********************
    //* æœ€å¤§å †æ ¸å¿ƒè¾…åŠ©å‡½æ•°
    //********************
    private void shiftUp(int k){

        while( k > 1 && data[k/2].compareTo(data[k]) < 0 ){
            swap(k, k/2);
            k /= 2;
        }
    }

    private void shiftDown(int k){

        while( 2*k <= count ){
            int j = 2*k; // åœ¨æ­¤è½®å¾ªç¯ä¸­,data[k]å’Œdata[j]äº¤æ¢ä½ç½®
            if( j+1 <= count && data[j+1].compareTo(data[j]) > 0 )
                j ++;
            // data[j] æ˜¯ data[2*k]å’Œdata[2*k+1]ä¸­çš„æœ€å¤§å€¼

            if( data[k].compareTo(data[j]) >= 0 ) break;
            swap(k, j);
            k = j;
        }
    }

    // æµ‹è¯• heapify
    public static void main(String[] args) {
        int N = 100;
        Integer[] arr = SortTestHelper.generateRandomArray(N, 0, 100000);
        Heapify<Integer> heapify = new Heapify<Integer>(arr);
        // å°†heapifyä¸­çš„æ•°æ®é€æ¸ä½¿ç”¨extractMaxå–å‡ºæ¥
        // å–å‡ºæ¥çš„é¡ºåºåº”è¯¥æ˜¯æŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºå–å‡ºæ¥çš„
        for( int i = 0 ; i < N ; i ++ ){
            arr[i] = heapify.extractMax();
            System.out.print(arr[i] + " ");
        }

        // ç¡®ä¿arræ•°ç»„æ˜¯ä»å¤§åˆ°å°æ’åˆ—çš„
        for( int i = 1 ; i < N ; i ++ )
            assert arr[i-1] >= arr[i];
    }
}
```



**æ³¨æ„ï¼šå †æ’åºæ˜¯æ²¡æœ‰æ¨ç»“æ„é‡è¦çš„ï¼Œå †æ’åºä½¿ç”¨çš„ä¸æ˜¯å¾ˆå¤šã€‚**

### æ¡ˆä¾‹

> å·²çŸ¥ä¸€ä¸ªå‡ ä¹æœ‰åºçš„æ•°ç»„ï¼Œå‡ ä¹æœ‰åºæ˜¯æŒ‡ï¼Œå¦‚æœæŠŠæ•°ç»„æ’å¥½é¡ºåºçš„è¯ï¼Œæ¯ä¸ªå…ƒç´ ç§»åŠ¨çš„è·ç¦»å¯ä»¥ä¸è¶…è¿‡kï¼Œ
>
> å¹¶ä¸”kç›¸å¯¹äºæ•°ç»„æ¥è¯´æ¯”è¾ƒå°ã€‚è¯·é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ’åºç®—æ³•é’ˆå¯¹è¿™ä¸ªæ•°æ®è¿›è¡Œæ’åºç»™å®šä¸€ä¸ªintæ•°ç»„Aï¼Œ
>
> åŒæ—¶ç»™å®šAçš„å¤§å°nå’Œé¢˜æ„ä¸­çš„kï¼Œè¯·è¿”å›æ’åºåçš„æ•°ç»„ã€‚
>
> æ€è·¯ï¼šä½¿ç”¨ç©ºé—´å¤æ‚åº¦ä¸ºOï¼ˆnlognï¼‰ä¸­çš„å †æ’åºï¼Œå› ä¸ºå¿«é€Ÿæ’åºæ˜¯éšæœºé€‰å–ä¸€ä¸ªæ•°ç„¶åå·¦å³åˆ†æ®µï¼Œå½’å¹¶æ’åºæ˜¯åˆ†æˆn
>
> ä¸ªåªæœ‰ä¸€ä¸ªå…ƒç´ çš„åºåˆ—ï¼Œä»–ä»¬ä¸åºåˆ—é¡ºåºå…³ç³»ä¸å¤§ï¼Œæ‰€ä»¥é€‰ç”¨å †æ’åºè§£å†³ã€‚
>
> 1.å»ºç«‹ç”±kå¯å…ƒç´ çš„å°é¡¶å †ï¼Œç„¶åå–å‡ºé¡¶ä¸Šå…ƒç´ 
>
> 2.å †é¡¶ç”¨æ²¡æœ‰å»ºå †çš„ä¸‹ä¸€å…ƒç´ æ›¿ä»£ï¼Œé‡æ–°å»ºå †
>
> 3.åå¤è°ƒç”¨ï¼Œå®Œæˆæ’åºï¼Œæ­¤ç®—æ³•å› ä¸ºæ¯ä¸ªå…ƒç´ ç§»åŠ¨éƒ½åœ¨kä»¥å†…ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆnlogkï¼‰

```java
class ScaleSort {
    public int[] sortElement(int[] A, int n, int k) {
    	if(n == 0 || n < k)
    		return A;
        int[] heap = Arrays.copyOf(A, k);
        //å»ºç«‹åªæœ‰kä¸ªå…ƒç´ çš„å°é¡¶å †
        for(int i = k/2-1;i >= 0;i--)
        	heapCreate(heap,i,k);
        //æ ¸å¿ƒï¼šå»ºå®Œå †åå–å‡ºå †é¡¶ï¼Œèµ‹å€¼ç»™Aç¬¬ä¸€å…ƒç´ ï¼Œç„¶åç”¨åé¢ä»kåˆ°nä¸ªå…ƒç´ é€å¸ƒæ›¿ä»£
        for(int i = k;i < n;i++){
        	A[i-k] = heap[0];
        	heap[0] = A[i];
        	heapCreate(heap, 0, k);
        }
        //é€æ­¥å»ºå †æ’åºç»“æŸåï¼Œæœ€åè¿˜æœ‰n-1-k+1åˆ°n-1çš„kä¸ªå…ƒç´ çš„å®Œæ•´å †
        //ç”¨æ™®é€šå †æ’åºæ€æƒ³è¾“å‡º
        //å †é¡¶ä¸æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢
        for(int i = n-k;i < n;i++){
        	A[i] = heap[0];
        	//äº¤æ¢
        	int temp = heap[0];
        	heap[0] = heap[k-1];
        	heap[k-1] = temp;
        	//é‡æ–°è°ƒæ•´
        	heapCreate(heap, 0, --k);
        }
        return A;
    }
    //å»ºå°é¡¶å †å‡½æ•°
    private void heapCreate(int[] heap,int i,int k){
    	int temp = heap[i];
    	for(int j = 2*i+1;j < k; j = 2*j+1){
    		if((j+1 < k)&&(heap[j] > heap[j+1]))
    			j++;
    		if(temp < heap[j])
    			break;
    		heap[i] = heap[j];
    		i = j;
    	}
    	heap[i] = temp;
    }
}
```



#### PriorityQueue â€“ java

PriorityQueueæœ¬è´¨è¿˜æ˜¯ä¸€ä¸ªFIFOçš„é˜Ÿåˆ—ï¼Œæ˜¯ä¸€ä¸ªç°æˆçš„å †ç»“æ„ï¼Œå…¶ç‰¹æ®Šä¹‹å¤„åœ¨äºä»–çš„å‡ºé˜Ÿé¡ºåºæ˜¯æŒ‰ç…§ä¼˜å…ˆçº§è¿›è¡Œæ¯”è¾ƒçš„ã€‚åœ¨å‘é€æ¶ˆæ¯ç­‰åº”ç”¨åœºæ™¯è¿˜æ˜¯ç»å¸¸ç”¨åˆ°çš„ï¼Œè¿˜æƒ³èµ·äº†æ¶ˆæ¯ä¸­é—´ä»¶mqã€‚

ç®€å•ç”¨æ³•ï¼š

1 æ„å»º

```text
Queue<String> q = new PriorityQueue<>();//ç”¨çš„é»˜è®¤æ¯”è¾ƒæ–¹å¼
```

æˆ–è€…

```text
PriorityQueue<Character> queue = new PriorityQueue<Character>(new Comparator<Character>()
        {
 public int compare(Character letter1, Character letter2)
            {
 return counts[letter2 - 'a'] - counts[letter1 - 'a'];//ä»å‡ºç°é¢‘ç‡å¤§åˆ°å°æ’åˆ—ä¼˜å…ˆçº§
            }
        });
```

ä½¿ç”¨(å’Œé˜Ÿåˆ—åŸºæœ¬ä¸€æ ·)

```text
queue.offer(â€˜a');   
queue.poll('b');   //å¼¹å‡º
queue.add(8);   //åŠ å…¥
```

## END é“¾æ¥

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](5.md)
+ [ä¸‹ä¸€èŠ‚](7.md)
---
+ [å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•](https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md)